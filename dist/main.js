(()=>{"use strict";var e=function(e,t){!function(e){return e.some((function(e){return!e.validity.valid}))}(e)?(t.disabled=!1,t.classList.remove("disabled")):(t.disabled=!0,t.classList.add("disabled"))};var t=function(t){!function(t){var r=function(e){var t=e.formElement,r=e.popupSubmitButtonSelector,n=e.popupFormField;return{inputList:Array.from(t.querySelectorAll(n)),buttonElement:t.querySelector(r)}}(t),n=r.inputList,o=r.buttonElement;e(n,o),n.forEach((function(r){r.addEventListener("input",(function(){!function(e,t){t.validity.patternMismatch?t.setCustomValidity(t.dataset.errorMessage):t.setCustomValidity(""),t.validity.valid?function(e,t){var r=e.popupFormFieldError,n=e.popupFormFieldTypeError,o=e.formElement.querySelector(".".concat(t.id,"-error"));t.classList.remove(r),o.classList.remove(n),o.textContent=""}(e,t):function(e,t,r){var n=e.popupFormFieldError,o=e.popupFormFieldTypeError,c=e.formElement.querySelector(".".concat(t.id,"-error"));t.classList.add(n),c.textContent=r,c.classList.add(o)}(e,t,t.validationMessage)}(t,r),e(n,o)}))}))}(t)},r=document.querySelector(".popup-add"),n=document.querySelector(".popup-image"),o=document.querySelector(".popup-image img"),c=document.querySelector(".popup-avatar"),i=document.querySelector('.popup__form[name="avatar"]'),u=(document.querySelector(".profile__avatar"),document.querySelector(".profile__edit-overlay")),p=document.querySelector(".popup-image .element__image-name"),a=document.querySelector('.popup__form[name="edit-profile"]'),l=a.querySelector('[name="name"]'),s=a.querySelector('[name="about"]'),d=document.querySelector(".popup-edit"),m=document.querySelector(".elements__list"),f=document.querySelector('.popup__form[name="new-place"]'),y=document.querySelector(".profile__info-title"),v=document.querySelector(".profile__info-subtitle"),b=document.querySelector(".page .content .profile .profile__edit-button"),_=document.querySelector(".page .content .profile .profile__add-button"),g=f.querySelector('[name="name"]'),S=f.querySelector('[name="link"]'),E=document.querySelector("template"),O=[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}],q={popupSubmitButtonSelector:".popup__submit-button",popupFormField:".popup__form-field",popupFormFieldError:"popup__form-field-error_active",popupFormFieldTypeError:"popup__form-field_type_error"};function j(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?j(Object(r),!0).forEach((function(t){L(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function L(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h(e){var t=e.querySelector(".popup__form");e.classList.add("popup_opened"),document.addEventListener("keydown",P),t.reset()}function w(e){e.classList.remove("popup_opened"),document.removeEventListener("keydown",P)}function P(e){"Escape"===e.key&&w(document.querySelector(".popup_opened"))}function F(){h(r),revalidateForm(k({formElement:f},q))}function x(e){var t=e.currentTarget,r=t.src,c=t.alt;p.innerText=c,o.src=r,o.alt=c,h(n)}function T(){h(d),l.value=y.innerText,s.value=v.innerText,revalidateForm(k({formElement:a},q))}function D(e){var t,r;e.stopPropagation(),e.preventDefault(),t=l.value,y.innerText=t,r=s.value,v.innerText=r,w(d)}function C(){h(c)}function A(e){e.preventDefault();var t=document.querySelector(".profile__avatar"),r=document.getElementById("avatar-input");t.src=r.value,e.currentTarget.reset(),w(c)}function B(e){e.stopPropagation(),e.preventDefault(),m.prepend(M(g.value,S.value)),e.currentTarget.reset(),w(r)}function M(e,t){var r=E.content.firstElementChild.cloneNode(!0),n=r.querySelector(".element__image");return n.src=t,n.alt=e,r.querySelector(".element__title").textContent=e,n.addEventListener("click",x),r.querySelector(".element__like-button").addEventListener("click",V),r.querySelector(".element__delete-button").addEventListener("click",z),r}function V(e){e.currentTarget.classList.toggle("element__like-button_active")}function z(e){e.currentTarget.closest(".element").remove()}function I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function N(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?I(Object(r),!0).forEach((function(t){G(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function G(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}window.addEventListener("load",(function(){!function(){for(var e=0;e<O.length;e+=1){var t=O[e];m.prepend(M(t.name,t.link))}}(),b.addEventListener("click",T),a.addEventListener("submit",D),f.addEventListener("submit",B),_.addEventListener("click",F),u.addEventListener("click",C),i.addEventListener("submit",A),document.querySelectorAll(".popup").forEach((function(e){e.addEventListener("mousedown",(function(t){t.target.classList.contains("popup_opened")&&w(e),t.target.classList.contains("popup__close-button")&&w(e)}))})),t(N({formElement:a},q)),t(N({formElement:f},q)),t(N({formElement:i},q))}))})();